= javascript_pack_tag "users/registrations/index", media: "all", "data-turbolinks-track": "reload"
= render partial: "confirmation_modal"
.row
  .col-md-12.col-lg-10.offset-lg-1
    .form-row
      .col-12
        .card
          .card-header
            .row
              .col-8
                %h4.text-primary
                  %b= t('.title')
              .col-4.text-right
                = link_to t('.new'), new_users_registration_path, class: "btn btn-primary"
          .card-body
            .form-row
              .col-12.mb-2
                %b= t('.search_title')
            = search_form_for @q, url: users_registrations_path do |f|
              .form-row
                .col-10
                  = f.text_field :email_cont, class: 'form-control',placeholder: t('.placeholder.search')
                .col-2.text-right
                  %button.btn-block.btn.btn-purple{ type: "submit", value: "Search"}
                    %i.fas.fa-search.fa-sm
                    = t('.search')
  .col-12
    - if @users.length > 0
      %table.table.table-sm.table-striped
        %thead
          %tr.bg-primary.text-light
            %th= t('users.email')
            %th= t('users.name')
            %th= t('users.phone')
            %th= t('users.role')
            %th
        %tbody
          - @users.each do |user|
            - user_detail = user.user_detail
            %tr
              %td
                = user.email
              %td 
                = user_detail.name
                = user_detail.last_name
              %td
                = user_detail.phone
              %td
                = user.role.capitalize
              %td.text-right
                = link_to edit_users_registration_path(user), class: "btn btn-success btm-sm mr-1" do
                  %i.fas.fa-edit.fa-xs
                %button.btn.btn-danger.btm-sm{onclick: "show_confirmation_modal(this)",
                  action: users_registration_path(user),
                  method: :delete}
                  %i.fas.fa-trash-alt.fa-xs
      = paginate @users
    - else
      .text-center.text-muted.mt-5
        %h2
          No hay resultados para mostrar.