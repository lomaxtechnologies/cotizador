.card.card-body
  = form_with scope:@user, url: users_registrations_path, name: "users-registration-form" do |f|
    - if @user.errors.any? || @user_detail.errors.any?
      #error_explanation
        - error_count = @user.errors.count + @user_detail.errors.count
        %h2= "#{pluralize(error_count, "error")} prohibited this user from being saved:"
        %ul
          - @user.errors.full_messages.each do |message|
            %li= message
          - @user_detail.errors.full_messages.each do |message|
            %li = message
    .form-row.mb-2
      = f.label t('.name'), class:"mb-0 text-primary font-weight-bold", for: "user_detail_name"
      %input{ type:"text", class: "form-control form-control-sm", name: "user_detail[name]", id: "user_detail_name", required: true}
    .form-row.mb-2
      = f.label t('.lastname'), class:"mb-0 text-primary font-weight-bold", for: "user_detail_name"
      %input{ type:"text", class: "form-control form-control-sm", name: "user_detail[last_name]", id: "user_detail_last_name" }
    .form-row.mb-2
      = f.label t('users.phone'), class:"mb-0 text-primary font-weight-bold", for: "user_detail_phone"
      %input{ type:"text", class: "form-control form-control-sm", name: "user_detail[phone]", id: "user_detail_phone" }
    .form-row.mb-2
      .col-6
        = f.label :email, class: "mb-0 text-primary font-weight-bold"
        = f.email_field :email, class: "form-control form-control-sm", required: true
      .col-6
        = f.label :role, class: "mb-0 text-primary font-weight-bold"
        %select.form-control.form-control-sm{ name: "user[role]", id: "user_role", required: true}
          - User.roles.each do |key,value|
            %option{:value => key}
              = value
    .form-row.mb-2
      = f.label :password, class: "mb-0 text-primary font-weight-bold"
      = f.password_field(:password, 
        class: "form-control form-control-sm", 
        required: true, 
        minlength:6,
        confirmation: "user_password_confirmation", 
        onchange: "confirm_password(this)")
    .form-row.mb-2
      = f.label :password_confirmation, class: "mb-0 text-primary font-weight-bold"
      = f.password_field(:password_confirmation, 
        class: "form-control form-control-sm", 
        minlength:6,
        required: true, 
        confirmation: "user_password", 
        onchange: "confirm_password(this)")
    .form-row.actions.text-right
      .col-12
        = f.submit t('users.save'), class: "btn btn-primary btn-sm px-2"